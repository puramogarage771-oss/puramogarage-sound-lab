<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>PURAMO GARAGE | SOUND LAB</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  background:#000;
  color:#00ffcc;
  font-family: monospace;
  padding:20px;
}
h1{font-size:22px;}
.panel{
  border:1px solid #00ffcc;
  padding:16px;
  margin-bottom:20px;
}
button{
  background:#000;
  color:#00ffcc;
  border:1px solid #00ffcc;
  padding:8px 14px;
  margin:4px;
  cursor:pointer;
}
button:hover{
  background:#00ffcc;
  color:#000;
}
.code{
  background:#020404;
  border:1px solid #00ffcc;
  padding:12px;
  margin-top:10px;
  white-space:pre;
  font-size:14px;
}
.small{
  font-size:13px;
  opacity:0.8;
}
</style>
</head>

<body>

<h1>ğŸ¹ PURAMO GARAGE â€“ SOUND LAB</h1>
<p class="small">
â–¶ å†ç”Ÿã‚’1å›ã‚¯ãƒªãƒƒã‚¯å¾Œã€éŸ³éšãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
</p>

<div class="panel">
  <h2>â‘  éŸ³éšãƒ†ã‚¹ãƒˆ</h2>
  <button onclick="playScale(scaleC4)">â–¶ ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰ï¼ˆC4ï¼‰</button>
  <button onclick="playScale(scaleC5)">â–¶ ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰ï¼ˆC5ï¼‰</button>

  <div class="code">
// C4 scale
262 294 330 349 392 440 494 523

// C5 scale
523 587 659 698 784 880 988 1047
  </div>
</div>

<p class="small">
PIC half_period = 1,000,000 / (Hz Ã— 2)<br>
â€» å®Ÿæ©Ÿã§ã¯ -10ã€œ15% è£œæ­£ãŒç›®å®‰
</p>

<script>
let ctx = null;

// éŸ³éšå®šç¾©ï¼ˆHzï¼‰
const scaleC4 = [262, 294, 330, 349, 392, 440, 494, 523];
const scaleC5 = [523, 587, 659, 698, 784, 880, 988, 1047];

async function playTone(freq, duration){
  if(!ctx){
    ctx = new (window.AudioContext || window.webkitAudioContext)();
  }
  await ctx.resume();

  const osc = ctx.createOscillator();
  osc.type = "square";       // PICã«è¿‘ã„
  osc.frequency.value = freq;
  osc.connect(ctx.destination);
  osc.start();

  setTimeout(() => {
    osc.stop();
    osc.disconnect();
  }, duration);
}

async function playScale(scale){
  if(!ctx){
    ctx = new (window.AudioContext || window.webkitAudioContext)();
  }
  await ctx.resume();

  let time = 0;
  scale.forEach(freq => {
    setTimeout(() => {
      playTone(freq, 350);   // 350msé³´ã‚‰ã™
    }, time);
    time += 450;             // éŸ³ï¼‹ä¼‘ç¬¦
  });
}
</script>

</body>
</html>

